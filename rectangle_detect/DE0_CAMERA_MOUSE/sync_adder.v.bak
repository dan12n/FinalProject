module sync_add(clock, intensity, stop, reset, filled_out);
	input clock;
	input reset;
	input reg [9:0] intensity;
	input reg stop;
	output reg filled_out;

	reg [21:0] intensity_sum;
	initial intensity_sum = 0;
	
	always @ (posedge clock)
		begin
			if (stop == 0)
				begin
					intensity_sum <= intensity_sum + intensity;
				end
			else if (reset == 1)
				begin
					intensity_sum <= 0;
				end
			if (intensity_sum > 163000)
				begin
					filled_out <= 1;
				end
			else 
				begin
					filled_out <= 0;	
				end	
		end
endmodule